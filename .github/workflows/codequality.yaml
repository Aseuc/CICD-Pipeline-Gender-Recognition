name: Code Quality Check
on:
  push:
    branches: [Gender_Dataset_kaggle_23000]

jobs:
  benchmark:
    runs-on: [ubuntu-latest]
    # container: docker://dvcorg/cml-py3:latest
    steps:
      - uses: actions/checkout@v3
        with:
          sparse-checkout: |
            .github/workflows/* --skip-checks
            deploy/* --skip-checks
            model/model_script/* --skip-checks
            deploy/dataprep_scripts/* --skip-checks
            test/model_test_scripts/* --skip-checks
            data/dataprep_scripts/* --skip-checks
            radon_tests/* --skip-checks
        env:
          repo_token: ${{ secrets.GITHUB_TOKEN }}
      - name: Run Code Quality Check
        env:
          repo_token: ${{ secrets.GITHUB_TOKEN }}
        run: |
          python -m pip install --upgrade pip
          pip install radon
          chmod +x .github/workflows/radon.sh
          ./.github/workflows/radon.sh
          git pull
          git config --local user.email "Aseuc@github.com"
          git config --local user.name "Aseuc"
          git add radon_tests/*
          git push origin Gender_Dataset_kaggle_23000